---
typora-root-url: ..\IMG
---

# Chapter 2

### 자바와 절차적/구조적 프로그래밍

- jdk :  개발도구
- jre : jvm용 운영체제(OS 역할)
- jvm : 자바가상머신(하드웨어 역할)



#### 프로그램이 메모리를 사용하는 방식

##### T 메모리

![1540358800806](/1540358800806.png)

[ 코드 실행 영역 | 데이터 저장영역 ]

- 코드 실행 영역은 자바 개발자들이 알 필요는 없다.
- 데이터 저장 영역을 알아야한다.

![1540359673821](/1540359673821.png)

```
- static 영역
- stack 영역 
- heap 영역
```

### 자바프로그램의 실행흐름

```java
public class Start4 {
	public static void main(String[] args) {
		int k = 5;
		int m;

		m = square(k);
	}

	private static int square(int k) {
		int result;
		
		k = 25;

		result = k;

		return result;
	}
}
```

1. JRE가 자바프로그램을 실행시킬 때 맨처음으로 하는 일은 main method를 찾는다.
2. `static` 영역에 java.lang 패키지가 올라가고 `클래스`와 `필드` ,`메소드`가 올라감
3. `stack`영역에 main() 메소드의 스택프레임이 올라가고 변수 영역에 인자를 올린다.

   - 지역변수의 경우 선언이 아닌 초기화 될 때 올라온다.

   - 클래스 선언 {}을 제외하고 메소드 {} if {} 등이 생길때 마다 stack 프레임이 생긴다.
4. 메소드를 실행
5. "}"괄호를 만나게 되면 main()의 스택프레임이 사라진다.

![1540364501567](/1540364501567.png)

> 두 개의 메소드 프레임 사이에서는 서로 접근 불가함.
>
> 단 스택프레임안에 내부 스택프레임이 생성된다면 내부에서 외부 스택프레임으로 접근할 수 있다.(like if 블록)



**tip** : 멤버변수는 초기화 해주는데 왜 지역변수는 초기화 해주지 않을까? 멤버변수는 어디서 먼저 쓸지 모르고 지역변수는 해당지역에서 쓰기때문에 거기서 초기화해서 쓰라는 것이다.



### 멀티 쓰레드와 멀티프로세스

![1540366564750](/1540366564750.png)

- 멀티스레드는 `스택`영역을 스레드 갯수만큼 분할

> Spring에서는 요청 만큼 스레드를 만들어준다.
>
> 공유영역(`static` , `heap`)에 있는 값들을 스레드별로 변경하려다 문제가 생길 수 있으니 주의해야한다.

![1540366634051](/1540366634051.png)

- 멀티프로세스는 `데이터 저장영역`을 프로세스 갯수만큼 분할 

> 공유영역에 있는 값들이 변할 위험이 줄어들어 안정성은 높아지지만, 그만큼 메모리 사용량이 늘어난다. 